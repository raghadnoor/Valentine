<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Be My Valentine üíñ</title>
<style>
    * { box-sizing: border-box; }
    body {
        margin: 0;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background: #e92323;
        font-family: Brush Script MT;
        overflow: hidden;
        transition: background 0.5s;
    }
    .card {
        background: white;
        padding: 40px 50px;
        border-radius: 20px;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        position: relative;
        z-index: 10;
    }
    h1 {
        margin-bottom: 30px;
        color: #cc0000;
    }
    .btn-row {
        display: flex;
        justify-content: center;
        gap: 20px;
    }
    button {
        padding: 12px 28px;
        font-size: 16px;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        transition: transform 0.1s;
    }
    #yesBtn {
        background-color: #cc0000;
        color: white;
        font-family: Brush Script MT;
    }
    #yesBtn:hover { transform: scale(1.05); }

    /* No button: fixed position so it can move freely anywhere on screen */
    #noBtn {
        background-color: #aaa;
        color: white;
        position: fixed;
        z-index: 999;
        transition: none;
        pointer-events: auto;
        font-family: Brush Script MT;
    }

    .celebration {
        font-size: 22px;
        color: #cc0000;
        margin-top: 20px;
    }

    .heart-float {
        position: fixed;
        font-size: 22px;
        pointer-events: none;
        animation: floatUp 2.5s ease-out forwards;
        z-index: 5;
    }
    @keyframes floatUp {
        0%   { opacity: 1; transform: translateY(0) scale(1); }
        100% { opacity: 0; transform: translateY(-200px) scale(1.4); }
    }
</style>
</head>
<body>

<div class="card">
    <h1>Will you be my Valentine? ‚ù§Ô∏è</h1>
    <div class="btn-row">
        <button id="yesBtn">Yes üíï</button>
        <!-- No button placeholder to reserve layout space -->
        <div style="width:110px;height:44px;"></div>
    </div>
    <div id="result"></div>
</div>

<!-- No button lives outside the card so it can roam the full screen -->
<button id="noBtn">No üî™</button>

<script>
    const noBtn   = document.getElementById("noBtn");
    const yesBtn  = document.getElementById("yesBtn");
    const result  = document.getElementById("result");

    // --- Position the No button initially right next to the Yes button ---
    function initNoBtnPosition() {
        const yesRect = yesBtn.getBoundingClientRect();
        noBtn.style.left = (yesRect.right + 20) + "px";
        noBtn.style.top  = yesRect.top + "px";
    }
    initNoBtnPosition();
    window.addEventListener("resize", initNoBtnPosition);

    // --- Escape logic: flee from mouse cursor ---
    const FLEE_RADIUS = 180; // pixels ‚Äî how close before it runs
    const FLEE_DIST   = 260; // how far it tries to jump

    document.addEventListener("mousemove", (e) => {
        const btnRect = noBtn.getBoundingClientRect();
        const bW = btnRect.width;
        const bH = btnRect.height;
        const btnCX = btnRect.left + bW / 2;
        const btnCY = btnRect.top  + bH / 2;

        const dx   = btnCX - e.clientX;
        const dy   = btnCY - e.clientY;
        const dist = Math.hypot(dx, dy);

        if (dist < FLEE_RADIUS) {
            const margin  = 12;
            const maxX    = window.innerWidth  - bW - margin;
            const maxY    = window.innerHeight - bH - margin;
            const baseAngle = Math.atan2(dy, dx);

            // Try 24 candidate angles spread around the base escape direction.
            // Pick the candidate that lands farthest from the cursor (after clamping).
            let bestX = -1, bestY = -1, bestFinalDist = -1;

            for (let i = 0; i < 24; i++) {
                // Spread: 0, ¬±15¬∞, ¬±30¬∞ ... up to ¬±172.5¬∞ in alternating order
                const side  = (i % 2 === 0 ? 1 : -1);
                const step  = Math.floor((i + 1) / 2);
                const angle = baseAngle + side * step * (Math.PI / 12);

                // Candidate target (button centre)
                let cx = btnCX + Math.cos(angle) * FLEE_DIST;
                let cy = btnCY + Math.sin(angle) * FLEE_DIST;

                // Convert to top-left and clamp inside viewport
                let lx = Math.max(margin, Math.min(maxX, cx - bW / 2));
                let ly = Math.max(margin, Math.min(maxY, cy - bH / 2));

                // Measure actual distance from cursor after clamping
                const finalDist = Math.hypot((lx + bW/2) - e.clientX,
                                             (ly + bH/2) - e.clientY);

                if (finalDist > bestFinalDist) {
                    bestFinalDist = finalDist;
                    bestX = lx;
                    bestY = ly;
                }
            }

            noBtn.style.left = bestX + "px";
            noBtn.style.top  = bestY + "px";
        }
    });

    // --- Yes button celebration ---
    yesBtn.addEventListener("click", () => {
        result.innerHTML = '<div class="celebration">Yaaaaay!!!üêùüéâ I knew you\'d say yes, my heart never doubted! üíò</div>';
        document.body.style.background = "#990000";

        // Spawn floating hearts
        for (let i = 0; i < 60; i++) {
            setTimeout(() => {
                const heart = document.createElement("div");
                heart.className = "heart-float";
                heart.innerHTML = ["‚ù§Ô∏è","üíï","üíñ","üíó","üíì"][Math.floor(Math.random() * 5)];
                heart.style.left = Math.random() * window.innerWidth  + "px";
                heart.style.top  = Math.random() * window.innerHeight + "px";
                heart.style.fontSize = (16 + Math.random() * 20) + "px";
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 2600);
            }, i * 40);
        }

        noBtn.style.display = "none";
    });
</script>
</body>
</html>
